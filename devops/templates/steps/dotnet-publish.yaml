parameters:
    - name: nugetSource
      type: string
    - name: packageId
      type: string

steps:

- task: PowerShell@2
  displayName: "Publish Nuget Package"
  inputs:
    targetType: inline
    script: |
      dotnet nuget push "${Env.STAGING_DIRECTORY}/nuget/${Env.PACKAGE_ID}.${Env.BUILD_VERSION}.nupkg" --api-key ${Env.API_KEY} --source ${Env.NUGET_SOURCE}
  env:
    STAGING_DIRECTORY: $(Build.ArtifactStagingDirectory)
    PACKAGE_ID: ${{ parameters.packageId }}
    BUILD_VERSION: $(buildVersionId)
    API_KEY: $(nugetApiKey)
    NUGET_SOURCE: ${{ parameters.nugetSource }}
